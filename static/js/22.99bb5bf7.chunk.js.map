{"version":3,"sources":["news/api.js","containers/News_api.jsx"],"names":["dataToLog","data","map","article","title","published_at","tag","id","author","date","match","username","url","String","replace","News_api","state","log","tags","error","type","axios","Axios","create","baseURL","urljoin","props","root","componentDidMount","a","window","scrollTo","get","response","tag_response","setState","logReverse","this","slice","reverse","Articles","range","Component","defaultProps"],"mappings":"+OAAaA,EAAY,SAACC,GACxB,OAAOA,EAAKC,KAAI,SAAAC,GAAY,IAClBC,EAAyCD,EAAzCC,MAAOC,EAAkCF,EAAlCE,aAAcC,EAAoBH,EAApBG,IAAKC,EAAeJ,EAAfI,GAAIC,EAAWL,EAAXK,OAChCC,EAAOJ,EAAaK,MAAM,uBAAuB,GACvD,MAAO,CACLN,QACAG,KACAD,MACAG,OACAD,OAAQA,EAAQA,EAAOG,SAAW,UAClCC,IAAK,OAASC,OAAON,GAAM,IAAME,EAAKK,QAAQ,KAAK,SCDnDC,E,4MACJC,MAAQ,CACNC,IAAK,GACLC,KAAM,GACNC,MAAO,M,EAOTC,KAAO,O,EAEPC,MAAQC,IAAMC,OAAO,CACnBC,QAASC,IAAQ,EAAKC,MAAMC,Q,EAG9BC,kB,sBAAoB,kCAAAC,EAAA,6DAClBC,OAAOC,SAAS,EAAG,GADD,kBAGO,EAAKV,MAAMW,IAAI,EAAKZ,KAAO,aAHlC,cAGVa,EAHU,gBAIW,EAAKZ,MAAMW,IAAI,aAJ1B,OAIVE,EAJU,OAKVjB,EAAMjB,EAAUiC,EAAShC,MACzBiB,EAAOgB,EAAajC,KAC1B,EAAKkC,SAAS,CAAElB,MAAKC,SAPL,kDAShB,EAAKiB,SAAS,CAAEhB,MAAK,OATL,0D,uDAclB,IAAMiB,EAAaC,KAAKrB,MAAMC,IAAIqB,MAAM,GAAGC,UACrCrB,EAAOmB,KAAKrB,MAAME,KACxB,OACE,kBAACsB,EAAA,EAAD,CAAUpC,MAAM,OAAOa,IAAKmB,EAAYhB,KAAMiB,KAAKjB,KAAMqB,MAAO,EAAGvB,KAAMA,Q,GAlCxDwB,aAAjB3B,EAOG4B,aAAe,CACpBhB,KAAM,yBAiCKZ","file":"static/js/22.99bb5bf7.chunk.js","sourcesContent":["export const dataToLog = (data) => {\n  return data.map(article => {\n    const { title, published_at, tag, id, author } = article;\n    const date = published_at.match(/(\\d{4}-\\d{2}-\\d{2})/)[1]\n    return {\n      title,\n      id,\n      tag,\n      date,\n      author: author? author.username : \"Unknown\",\n      url: \"news\" + String(id) + \"_\" + date.replace(/-/g,\"\")\n    }\n  })\n}\n","import React , { Component } from 'react';\nimport urljoin from 'url-join'\n\nimport Articles from './Articles'\n\nimport '../sass/main/news.scss';\nimport Axios from 'axios';\nimport { dataToLog } from '../news/api';\n\nclass News_api extends Component {\n  state = {\n    log: [],\n    tags: [],\n    error: null\n  }\n\n  static defaultProps = {\n    root: \"http://localhost:1337\"\n  }\n\n  type = \"news\"\n\n  axios = Axios.create({\n    baseURL: urljoin(this.props.root)\n  })\n\n  componentDidMount = async ()  => {\n    window.scrollTo(0, 0)\n    try{\n      const response = await this.axios.get(this.type + \"-articles\")\n      const tag_response = await this.axios.get('tags/name')\n      const log = dataToLog(response.data)\n      const tags = tag_response.data\n      this.setState({ log, tags })\n    }catch(error) {\n      this.setState({ error })\n    }\n  }\n\n  render() {\n    const logReverse = this.state.log.slice(0).reverse()\n    const tags = this.state.tags\n    return (\n      <Articles title='News' log={logReverse} type={this.type} range={5} tags={tags}/>\n    );\n  }\n}\n\n\n\nexport default News_api;\n"],"sourceRoot":""}